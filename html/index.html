<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Audite... Listen Up</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Paradigms Project">
    <meta name="author" content="Taylor Seale & Iheanyi Ekechukwu">

    <!-- Le styles -->
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-responsive.min.css" rel="stylesheet">
    <link href="/static/js/introjs.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-latest.js"></script>
    <style>



    /* GLOBAL STYLES
    -------------------------------------------------- */
    /* Padding below the footer and lighter body text */

    body {
      padding-bottom: 10px;
      background-color: #5a5a5a;
    }

    /* CUSTOMIZE THE NAVBAR
    -------------------------------------------------- */

    /* Special class on .container surrounding .navbar, used for positioning it into place. */
    .navbar-wrapper {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      z-index: 10;
      margin-top: 20px;
      margin-bottom: -90px; /* Negative margin to pull up carousel. 90px is roughly margins and height of navbar. */
    }
    .navbar-wrapper .navbar {

    }

    /* Remove border and change up box shadow for more contrast */
    .navbar .navbar-inner {
      border: 0;
      -webkit-box-shadow: 0 2px 10px rgba(0,0,0,.25);
         -moz-box-shadow: 0 2px 10px rgba(0,0,0,.25);
              box-shadow: 0 2px 10px rgba(0,0,0,.25);
      padding: 5px 10px 5px; 
    }

    /* Downsize the brand/project name a bit */
    .navbar .brand {
      font-size: 25px;
      text-shadow: 0 -1px 0 rgba(0,0,0,.5);
    }

    /* Navbar links: increase padding for taller navbar */
    .navbar .nav > li > a {

    }

    /* Offset the responsive button for proper vertical alignment */
    .navbar .search-navbar {

    }



    /* CUSTOMIZE THE CAROUSEL
    -------------------------------------------------- */

    /* Carousel base class */
    .carousel {
      margin-bottom: 30px;
    }

    .carousel .container {
      position: relative;
      z-index: 9;
    }

    .carousel-control {
      height: 80px;
      margin-top: 0;
      font-size: 120px;
      text-shadow: 0 1px 1px rgba(0,0,0,.4);
      background-color: transparent;
      border: 0;
      z-index: 10;
    }

    .carousel .item {
      height: 500px;
    }
    .carousel img {
      position: absolute;
      top: 0;
      left: 0;
      min-width: 100%;
      height: 500px;
    }

    .carousel-caption {
      background-color: transparent;
      position: static;
      max-width: 550px;
      padding: 0 20px;
      margin-top: 200px;
    }
    .carousel-caption h1,
    .carousel-caption .lead {
      margin: 0;
      line-height: 1.25;
      color: #fff;
      text-shadow: 0 1px 1px rgba(0,0,0,.4);
    }
    .carousel-caption .btn {
      margin-top: 10px;
    }



    /* MARKETING CONTENT
    -------------------------------------------------- */

    /* Center align the text within the three columns below the carousel */
    .marketing .span4 {
      text-align: center;
    }
    .marketing h2 h3 {
      font-weight: normal;
    }
    .marketing .span4 p {
      margin-left: 10px;
      margin-right: 10px;
    }


    /* Featurettes
    ------------------------- */

    .featurette-divider {
      margin: 80px 0; /* Space out the Bootstrap <hr> more */
    }
    .featurette {
      padding-top: 120px; /* Vertically center images part 1: add padding above and below text. */
      overflow: hidden; /* Vertically center images part 2: clear their floats. */
       box-shadow: 3px 3px 3px 3px #000;
    }
    .featurette-image {
      margin-top: -120px; /* Vertically center images part 3: negative margin up the image the same amount of the padding to center it. */
    }

    /* Give some space on the sides of the floated elements so text doesn't run right into it. */
    .featurette-image.pull-left {
      margin-right: 40px;
    }
    .featurette-image.pull-right {
      margin-left: 40px;
    }

    /* Thin out the marketing headings */
    .featurette-heading {
      font-size: 50px;
      font-weight: 300;
      line-height: 1;
      letter-spacing: -1px;
    }

    .loading {
      background-color: #5a5a5a;
      background:  no-repeat
      center center;
      height: 10px;
      width: 10px;
    }



    /* RESPONSIVE CSS
    -------------------------------------------------- */

    @media (max-width: 979px) {

      .carousel .item {
        height: 350px;
      }
      .carousel img {
        width: auto;
        height: 350px;
      }

       .carousel .item {
        height: 350px;
      }
      .carousel-caption {
        width: 65%;
        padding: 0 70px;
        margin-top: 120px;
      }
      .carousel-caption h1 {
        font-size: 30px;
      }

      .featurette {
        height: auto;
        padding: 0;
      }
      .featurette-image.pull-left,
      .featurette-image.pull-right {
        display: block;
        float: none;
        max-width: 40%;
        margin: 0 auto 20px;
      }
    }


    @media (max-width: 767px) {

      .carousel {
        margin-left: -20px;
        margin-right: -20px;
      }
      .carousel .container {

      }
      .carousel .item {
        height: 300px;
      }
      .carousel img {
        height: 300px;
      }
      .carousel-caption {
        width: 65%;
        padding: 0 70px;
        margin-top: 100px;
      }
      .carousel-caption h1 {
        font-size: 30px;
      }
      .carousel-caption .lead,
      .carousel-caption .btn {
        font-size: 18px;
      }

      .marketing .span4 + .span4 {
        margin-top: 40px;
      }

      .featurette-heading {
        font-size: 30px;
      }
      .featurette .lead {
        font-size: 18px;
        line-height: 1.5;
      }

    }
    </style>

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="/ico/favicon.png">

  <script>
    window.nextArtist="";
    window.nextSim1="";
    window.nextSim1Image="";
    window.nextSim2="";
    window.nextSim1Image="";
    window.nextSim3="";
    window.nextSim1Image="";
    window.nextStreamURL="";
    function choose_song(num,who){
      window.nextStreamURL="";
      var xb=document.getElementById("artist1");
      var yb=document.getElementById("artist2");
      var zb=document.getElementById("artist3");
      document.getElementById("nextButton").setAttribute("style","visibility: hidden");
      if (num==1){
        if(who==1){
          xb.setAttribute("style","-webkit-filter: blur(0px)")
          yb.setAttribute("style","-webkit-filter: blur(3px)")
          zb.setAttribute("style","-webkit-filter: blur(3px)")
        }
        nextArtist=document.getElementById("simArtist1Name").innerText;
      }
      else if (num==2){
        if (who==1){
          xb.setAttribute("style","-webkit-filter: blur(3px)")
          yb.setAttribute("style","-webkit-filter: blur(0px)")
          zb.setAttribute("style","-webkit-filter: blur(3px)")
        }
        nextArtist=document.getElementById("simArtist2Name").innerText;
      }
      else if (num==3){
        if (who==1){
          xb.setAttribute("style","-webkit-filter: blur(3px)")
          yb.setAttribute("style","-webkit-filter: blur(3px)")
          zb.setAttribute("style","-webkit-filter: blur(0px)")
        }
        nextArtist=document.getElementById("simArtist3Name").innerText;
      }
      var postdata = {search_artist: nextArtist};
      $.post('/search', postdata, function(data) {
        $("#nextArtistName").html(data['currentArtistName']);
        $("#nextTrack").html(data['currentTrack']);
        $("#nextArtistImage").attr("src", data['currentArtistImage']);
        nextSim1=data['simArtist1Name'];
        nextSim2=data['simArtist2Name'];
        nextSim3=data['simArtist3Name'];
        nextSim1Image=data['simArtist1Image'];
        nextSim2Image=data['simArtist2Image'];
        nextSim3Image=data['simArtist3Image'];
        nextStreamURL=data['streamURL'];
        document.getElementById("nextButton").setAttribute("style","visibility: visible");
      });
      return false;
    }
  </script>
  <script type="text/javascript">
      $(function() {
      // When the testform is submitted…

      $("#search-form").submit(function() { 
          document.getElementById("audioplayer").pause();
          // post the form values via AJAX…
          var postdata = {search_artist: $("#artist").val()};
          window.loadimg="/static/img/ajax-loader.gif"
          document.getElementById("artist1").setAttribute("style","-webkit-filter: blur(0px);");
          document.getElementById("artist2").setAttribute("style","-webkit-filter: blur(0px)");
          document.getElementById("artist3").setAttribute("style","-webkit-filter: blur(0px)");
          $("#currentArtistName").html("") ;
          $("#currentTrack").html("Searching...") ;
          $("#currentArtistImage").hide();
          $("#simArtist1Name").html("") ;
          $("#simArtist2Name").html("") ;
          $("#simArtist3Name").html("") ;
          $("#simArtist1Image").attr("src", loadimg);
          $("#simArtist2Image").attr("src", loadimg);
          $("#simArtist3Image").attr("src", loadimg);
          $.post('/search', postdata, function(data) {
              // and set the title with the result
              $("#currentArtistName").html(data['currentArtistName']) ;
              $("#currentTrack").html(data['currentTrack']) ;
              $("#currentArtistImage").attr("src", data['currentArtistImage']);
              $("#currentArtistImage").show();
              $("#simArtist1Name").html(data['simArtist1Name']) ;
              $("#simArtist2Name").html(data['simArtist2Name']) ;
              $("#simArtist3Name").html(data['simArtist3Name']) ;
              $("#simArtist1Image").attr("src", data['simArtist1Image']);
              $("#simArtist2Image").attr("src", data['simArtist2Image']);
              $("#simArtist3Image").attr("src", data['simArtist3Image']);
              $("#streamURL").attr("src", data['streamURL']).detach().appendTo("#audioplayer");
              document.getElementById("audioplayer").play();
              var rand = Math.floor((Math.random()*3)+1);
              choose_song(rand,0);
             });
          return false;
          });
      });
  </script>
  <script>
  function audio_play_pause() {
    var myAudio = document.getElementById("audioplayer");
    if (myAudio.paused) {
      myAudio.play();
      $("#paused").html("");
    } else {
      myAudio.pause();
      $("#paused").html("Paused");
    }
  }
  </script>
  </head>

  <body onload='javascript:introJs().start();'> 

    <!-- NAVBAR
    ================================================== -->
    <div class="navbar-wrapper" >
      <!-- Wrap the .navbar in .container to center it within the absolutely positioned parent. -->
      <div class="container" >
        <div class="navbar navbar-inverse" >
          <div class="navbar-inner" >
            <a class="brand" data-step='1' data-intro="Welcome to Audite! Let's have a look around..." data-position='bottom' href="#">Audite</a>
            <div style="display: inline-block;" class="pull-right">
              <form id="search-form" action="#" method="post" class="navbar-search">
                <input data-step='7' data-intro="Search for an artist to get started. Enjoy!" data-position='bottom' type="text" id="artist" class="search-query" placeholder="Choose an artist...">
              </form>
            </div>
          </div><!-- /.navbar-inner -->
        </div><!-- /.navbar -->

      </div> <!-- /.container -->
    </div><!-- /.navbar-wrapper -->



    <!-- Carousel
    ================================================== -->
    <div id="myCarousel" class="carousel slide" style="position: relative">
      <div class="carousel-inner">
        <div class="item active" onclick="javascript:audio_play_pause()">
          <img id="currentArtistImage" src="/static/img/girltalk.jpg" alt="">
          <div class="container">
            <div class="carousel-caption center">
              <h1 id="currentTrack">Triple Double</h1>
              <p id="currentArtistName" class="lead" data-step='2' data-intro="Your song plays here. Click the image to pause/play. Click the arrow to skip to the next track" data-position='bottom'>Girl Talk</p>
              <h1 id="paused"></h1>
            </div>
          </div>
        </div>
        <div class="item" onclick="javascript:audio_play_pause()">
          <img id="nextArtistImage" src="" alt="">
          <div class="container">
            <div class="carousel-caption center">
              <h1 id="nextTrack"></h1>
              <p id="nextArtistName" class="lead"></p>
              <h1 id="off"></h1>
            </div>
          </div>
        </div>
      </div>
      <a id="nextButton" class="right carousel-control" href="#myCarousel" style="visibility: hidden" data-slide="next">&rsaquo;</a>
          <audio style="position: absolute; bottom: 0; width: 100%;" id="audioplayer" onended="javascript:next_song()" controls autoplay>
            <source id="streamURL" type="audio/mpeg">
          </audio>
    </div><!-- /.carousel -->


    <!-- Marketing messaging and featurettes
    ================================================== -->
    <!-- Wrap the rest of the page in another container to center all the content. -->
    <div class="container marketing">
      <!-- Three columns of text below the carousel -->      
      <div class="row" data-step='3' data-intro="We automagically pick three similar artists to play next!" data-position='top'>
        <div class="span4">
          <div id="artist1">
            <a href="javascript:choose_song(1,1)">
              <img data-step='4' data-intro="You can pick this one..." data-position='top' id="simArtist1Image" src="/static/img/hoodinternet.jpg" class="img-polaroid" style="
                width: 240px;
                height: 240px;
                background-size: cover;
                background-image: "";
                background-repeat: no-repeat;
                background-position: 50% 50%;
                float:left;
              ">
            </a>
          </div>
          <h4 id="simArtist1Name">The Hood Internet</h4>
        </div><!-- /.span4 -->
        <div class="span4">
          <div id="artist2">
            <a href="javascript:choose_song(2,1)">
              <img data-step='5' data-intro="Or this one..." data-position='top' id="simArtist2Image" src="/static/img/e603.png" class="img-polaroid" style="
                width: 240px;
                height: 240px;
                background-size: cover;
                backgroung-image= "";
                background-repeat: no-repeat;
                background-position: 50% 50%;
                float:left;
              ">
            </a>
          </div>
          <h4 id="simArtist2Name">E-603</h4>
        </div><!-- /.span4 -->
        <div class="span4">
          <div id="artist3">
              <a href="javascript:choose_song(3,1)">
                <img data-step='6' data-intro="Or even this one! If you can't decide, we'll pick for you!" data-position='top' id="simArtist3Image" src="/static/img/whitepanda.jpg"class="img-polaroid" style="
                  width: 240px;
                  height: 240px;
                  background-size: cover;
                  background-image: "";
                  background-repeat: no-repeat;
                  background-position: 50% 50%;
                  float:left;
                ">
              </a>
          </div>
          <h4 id="simArtist3Name">White Panda</h4>
        </div><!-- /.span4 -->
      </div><!-- /.row -->

      <footer>
        <p class="pull-right">Powered by Echonest</p>
        <p>Taylor Seale & Iheanyi Ekechukwu</p>
      </footer>


    </div><!-- /.container -->



    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
<script src="/static/js/bootstrap.min.js"></script></script>
<script type="text/javascript" src="/static/js/intro.min.js"></script>
<script type="text/javascript">
     $('#myCarousel').carousel({interval: false})
</script>
<script>
function next_song() {
    document.getElementById("audioplayer").pause();
    $("#streamURL").attr("src", nextStreamURL).detach().appendTo("#audioplayer");
    document.getElementById("audioplayer").play();
    document.getElementById("artist1").setAttribute("style","-webkit-filter: blur(0px);");
    document.getElementById("artist2").setAttribute("style","-webkit-filter: blur(0px)");
    document.getElementById("artist3").setAttribute("style","-webkit-filter: blur(0px)");
    $("#simArtist1Name").html("") ;
    $("#simArtist2Name").html("") ;
    $("#simArtist3Name").html("") ;
    $("#simArtist1Image").attr("src", loadimg);
    $("#simArtist2Image").attr("src", loadimg);
    $("#simArtist3Image").attr("src", loadimg);
    $('#myCarousel').carousel('next');
    // swap all the divs as necessary
    document.getElementById('currentArtistImage').id = 'temp';
    document.getElementById('nextArtistImage').id = 'currentArtistImage';
    document.getElementById('temp').id = 'nextArtistImage';
    document.getElementById('currentTrack').id = 'temp';
    document.getElementById('nextTrack').id = 'currentTrack';
    document.getElementById('temp').id = 'nextTrack';
    document.getElementById('currentArtistName').id = 'temp';
    document.getElementById('nextArtistName').id = 'currentArtistName';
    document.getElementById('temp').id = 'nextArtistName';
    document.getElementById('paused').id = 'temp';
    document.getElementById('off').id = 'paused';
    document.getElementById('temp').id = 'off';
    $("#simArtist1Name").html(nextSim1) ;
    $("#simArtist2Name").html(nextSim2) ;
    $("#simArtist3Name").html(nextSim3) ;
    $("#simArtist1Image").attr("src", nextSim1Image);
    $("#simArtist2Image").attr("src", nextSim2Image);
    $("#simArtist3Image").attr("src", nextSim3Image);
    var rand = Math.floor((Math.random()*3)+1);
    choose_song(rand,0);
  }
  $('a[data-slide="next"]').click(next_song);
</script>

  </body>
</html>